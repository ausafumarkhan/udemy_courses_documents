
<!DOCTYPE html>
<html lang='en'>
<head>
<title>Infrastructure as Code with Terraform | Google Cloud Skills Boost for Partners</title>
<script>
//<![CDATA[
window.gon={};gon.deployment="googlecourses-run";
//]]>
</script>
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-5XSKHDX");
</script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/polyfills/webcomponents-loader-8583b47b01e40e6ea7bf1ad443a20b7e79bbdd5eafac009806a228c91a97282c.js"></script>
<script src="https://cdn.qwiklabs.com/assets/vendor-beb958bea8eff6a4ad4cf8f36a0a676817a4857e214b17ae983796071a4a816d.js"></script>
<script src="https://cdn.qwiklabs.com/assets/application-e8cb972df3c4fe0610b31ae6c7b12d323456c1a96b7ef459da8d7e0b1334a507.js"></script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/hallofmirrors-7a09cf7f89024ad118922f5e419d9f62ee3d22bc7ac2719228be7c19a37a1e4f.js"></script>
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script id='ze-snippet' src='https://static.zdassets.com/ekr/snippet.js?key=511e4158-0aec-4e3c-b2e6-4daa1769f51e'></script>


<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1NW16kHuBIiIDYr/Je6VWL9j0Phk7Ei2smk+8+dFLol3T3Q9yOQ2DNPRhb+CjOXP0PNRH20zzsUEt7w8RrJ2Hw==" />
<meta content='width=device-width, initial-scale=1.0, user-scalable=yes' name='viewport'>
<meta content='1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0' name='google-site-verification'>
<meta content='#3681E4' property='msapplication-TileColor'>
<meta content='/favicon-144.png' property='msapplication-TileImage'>
<meta content='[{&quot;id&quot;:&quot;recaptcha_experiment&quot;,&quot;optimize_id&quot;:&quot;dpViOcLkT3qS4TvL2mRojA&quot;,&quot;title&quot;:&quot;No Recaptcha shown for trusted users&quot;,&quot;variant_index&quot;:0,&quot;variant&quot;:&quot;original&quot;}]' name='active-experiments'>
<meta content='{&quot;userId&quot;:11061062,&quot;experimentIds&quot;:[&quot;oauth_risc_shutoff&quot;,&quot;program_groups&quot;,&quot;program_learning_assignment&quot;,&quot;course_upgrade&quot;,&quot;enforce_codebuild_verdicts&quot;,&quot;canonical_domain_redirect&quot;,&quot;learning_center&quot;,&quot;alexandria_show_bundle_errors&quot;,&quot;used_in&quot;,&quot;show_annual_purchase_now&quot;,&quot;community_forum&quot;,&quot;program_resources&quot;,&quot;programs&quot;,&quot;chat_off_for_signed_out_users&quot;]}' name='help-api-product-data'>
<meta content='{&quot;groupIds&quot;:[&quot;non_suadmins&quot;,&quot;students&quot;,&quot;non_organization&quot;,&quot;non_program&quot;]}' name='help-api-custom-data'>
<meta content='In this hands-on lab you will build, change, provision, and destroy infrastructure using Terraform in the cloud environment.' name='description'>
<meta content='Qwiklabs' name='author'>
<meta content='Infrastructure as Code with Terraform | Google Cloud Skills Boost for Partners' property='og:title'>
<meta content='website' property='og:type'>
<meta content='/favicon-144.png' property='og:image'>
<meta content='Qwiklabs' property='og:site_name'>
<meta content='In this hands-on lab you will build, change, provision, and destroy infrastructure using Terraform in the cloud environment.' property='og:description'>
<meta content='/qwiklabs_logo_900x887.png' property='og:logo' size='900x887'>
<meta content='/qwiklabs_logo_994x187.png' property='og:logo' size='994x187'>


<meta property="og:url" content="https://partner.cloudskillsboost.google/focuses/16374?parent=catalog" /><link href="https://partner.cloudskillsboost.google/focuses/16374?parent=catalog" rel="canonical" />
<link color='#3681E4' href='/favicon-svg.svg' rel='mask-icon'>
<link href='/favicon-180.png' rel='apple-touch-icon-precomposed'>
<link href='https://cdn.qwiklabs.com/Vag5GK2J6rS6843Qvg8TQJ1kEbAsEmQoF0%2BdLRfcLRE%3D' rel='shortcut icon' type='image/x-icon'>


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald:400|Roboto+Mono:400,700|Roboto:300,400,500,700|Google+Sans:300,400,500,700|Google+Sans+Display:400|Material+Icons|Google+Material+Icons" media="screen" />

<link rel="stylesheet" href="https://cdn.qwiklabs.com/assets/application-68068ef39e5c434ed33fece13d77f9c8a42264363c729ca27e5af35578a2813d.css" media="all" />


<style>
  :root {
    --primary-text-on-surface-color: #1a73e8;
    --primary-text-on-surface-color-dark: #1568d6;
    --primary-text-on-surface-color-darker: #135ec1;
    --primary-text-on-surface-color-darkest: #1154ac;
    --primary-surface-color: #1a73e8;
    --primary-surface-color-rgb: 26,115,232;
    --primary-surface-color-light: #d1e3fa;
    --primary-surface-color-lightest: #e8f1fd;
    --text-on-primary-color: #ffffff;
    --accent-text-on-surface-color: #f29900;
    --accent-surface-color: #f9ab00;
    --accent-surface-color-rgb: 249,171,0;
    --accent-surface-color-light: #ffefcc;
    --text-on-accent-color: #202124;
  }
</style>

<style>
  :root {
    --navbar-height: 112px;
  }
</style>



</head>
<body class='lab-show l-full no-nav application-new focuses focuses-show lab-show l-full no-nav '>
<div class='header-container'>
<div class='header'>
<ql-toolbar jumpEnabled>
<div class='header__title' slot='title'>
<ql-icon-button label="Back" href="https://partner.cloudskillsboost.google/quests/159" id="ca9e98fc53604e4f" target="_self" tip="Back">arrow_back</ql-icon-button>
<h1 class='ql-headline-6'>Infrastructure as Code with Terraform</h1>
</div>
<div class='header__actions' slot='action'>
<ql-icon-button icon='share' id='share_3362' label='Share on social media' tip='Share'></ql-icon-button>
<ql-menu for='share_3362'>
<ql-menu-item data-analytics-action='Shared to LinkedIn Feed.' data-analytics-category='Lab' data-analytics-label='Infrastructure as Code with Terraform' href='https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fpartner.cloudskillsboost.google%2Fcatalog_lab%2F3362%3Futm_medium%3Dsocial%26utm_source%3Dlinkedin%26utm_campaign%3Dql-social-share' icon='post_linkedin' label='Share on LinkedIn Feed' role='link' target='_blank'>
<span class='label'>Share on LinkedIn Feed</span>
</ql-menu-item>

<ql-menu-item data-analytics-action='Shared to Twitter.' data-analytics-category='Lab' data-analytics-label='Infrastructure as Code with Terraform' href='https://twitter.com/intent/tweet?text=Learn%20cloud%20tech%20through%20hands-on%20training%20on%20%23Qwiklabs%21&amp;url=https%3A%2F%2Fpartner.cloudskillsboost.google%2Fcatalog_lab%2F3362%3Futm_medium%3Dsocial%26utm_source%3Dtwitter%26utm_campaign%3Dql-social-share&amp;hashtags=' icon='post_twitter' label='Twitter' role='link' target='_blank'>
<span class='label'>Twitter</span>
</ql-menu-item>

<ql-menu-item data-analytics-action='Shared to Facebook.' data-analytics-category='Lab' data-analytics-label='Infrastructure as Code with Terraform' href='https://facebook.com/sharer.php?display=popup&amp;u=https%3A%2F%2Fpartner.cloudskillsboost.google%2Fcatalog_lab%2F3362%3Futm_medium%3Dsocial%26utm_source%3Dfacebook%26utm_campaign%3Dql-social-share' icon='post_facebook' label='Facebook' role='link' target='_blank'>
<span class='label'>Facebook</span>
</ql-menu-item>

<ql-copyable-input label='Share Link' value='https://partner.cloudskillsboost.google/catalog_lab/3362'></ql-copyable-input>
</ql-menu>

<ql-icon-button class='icon-button js-favorite-button favorite-button' data-id='16374' data-name='Infrastructure as Code with Terraform' data-type='CatalogItem' href='/favorite.json?item_id=16374&amp;item_type=CatalogItem' id='CatalogItem-16374-favorite-button' label='Add to favorites' tip='Add to favorites'>
favorite_border
</ql-icon-button>



<ql-icon-button id='control-panel-target' style='display: none;'>
dashboard
</ql-icon-button>
<ql-menu for='control-panel-target' id='control-panel-menu'></ql-menu>
<ql-icon-button class='mobile-hide' icon='help_outline' id='help-menu-button' label='Open help menu' tip='Help'></ql-icon-button>
<ql-menu for='help-menu-button' id='help-menu'>
<ql-menu-item data-analytics-action='opened_help' data-analytics-label='lab' label='Help Center' onclick='hallofmirrors.helpService.startHelp({&quot;productData&quot;:{&quot;userId&quot;:11061062},&quot;context&quot;:&quot;lab&quot;})'></ql-menu-item>
<ql-menu-item href='mailto:support@qwiklabs.com' label='Email support'></ql-menu-item>
<ql-menu-item label='Chat support' onClick='ql.chat.open()'></ql-menu-item>
</ql-menu>

<ql-icon-button class='mobile-hide' icon='language' id='language' label='Select your language preference' tip='Language'></ql-icon-button>
<ql-menu for='language'>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ar' href='/focuses/16374?locale=ar&amp;parent=catalog' label='العربية‬‎' lang='ar'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='de' href='/focuses/16374?locale=de&amp;parent=catalog' label='Deutsch' lang='de'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='en' href='/focuses/16374?locale=en&amp;parent=catalog' label='English' lang='en'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='es' href='/focuses/16374?locale=es&amp;parent=catalog' label='español (Latinoamérica)' lang='es'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='fr' href='/focuses/16374?locale=fr&amp;parent=catalog' label='français' lang='fr'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='fr_CA' href='/focuses/16374?locale=fr_CA&amp;parent=catalog' label='français (Canada)' lang='fr-CA'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='he' href='/focuses/16374?locale=he&amp;parent=catalog' label='עברית' lang='he'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='id' href='/focuses/16374?locale=id&amp;parent=catalog' label='bahasa Indonesia' lang='id'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='it' href='/focuses/16374?locale=it&amp;parent=catalog' label='Italiano' lang='it'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ja' href='/focuses/16374?locale=ja&amp;parent=catalog' label='日本語' lang='ja'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ko' href='/focuses/16374?locale=ko&amp;parent=catalog' label='한국어' lang='ko'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='pl' href='/focuses/16374?locale=pl&amp;parent=catalog' label='Polski' lang='pl'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='pt_BR' href='/focuses/16374?locale=pt_BR&amp;parent=catalog' label='português (Brasil)' lang='pt-BR'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='pt_PT' href='/focuses/16374?locale=pt_PT&amp;parent=catalog' label='português (Portugal)' lang='pt-PT'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ru' href='/focuses/16374?locale=ru&amp;parent=catalog' label='русский' lang='ru'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='tr' href='/focuses/16374?locale=tr&amp;parent=catalog' label='Türkçe' lang='tr'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='uk' href='/focuses/16374?locale=uk&amp;parent=catalog' label='український' lang='uk'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='zh' href='/focuses/16374?locale=zh&amp;parent=catalog' label='简体中文' lang='zh'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='zh_TW' href='/focuses/16374?locale=zh_TW&amp;parent=catalog' label='繁體中文' lang='zh-TW'></ql-menu-item>
</ql-menu>

<ql-icon-button id='my_account' label='My account' tip='My account'>
<ql-avatar></ql-avatar>
</ql-icon-button>
<ql-menu for='my_account' id='my_account_menu' style='max-height: 640px'>
<div class='my-account-menu'>
<ql-avatar class='l-mtl l-mbl' size='120'></ql-avatar>
<div class='my-account-menu__user-info l-mbl'>
<h4 class='ql-subhead-1'>Ausaf Khan</h4>
<p class='ql-body-2 text--light'>ausaf.khan@rakuten.com</p>
<p class='ql-body-2 text--light'>
</p>
<a class="text--green ql-subhead-2" href="/my_account/payments"><ql-chip positive>
0 Credits
</ql-chip>
</a></div>
<div class='buttons l-mbl'>
<a class="button button--hairline" id="settings" href="/my_account/profile">Settings</a>
</div>
<hr>
<ql-button data-analytics-action='clicked_sign_out' href='/users/sign_out' method='delete'>
Sign Out
</ql-button>
<div class='privacy l-mtl'>
<a target="_blank" class="ql-caption text--light" href="/privacy_policy">Privacy</a>
<span class='ql-caption text--light l-mls l-mrs'>&middot;</span>
<a class="ql-caption text--light" href="/terms_of_service">Terms</a>
</div>
</div>
</ql-menu>

</div>
</ql-toolbar>

</div>
</div>

<nav class='nav-panel js-nav-panel'>
<div class='nav-panel__logo'>
<div class="custom-logo"><img alt="Google Cloud Skills Boost for Partners" height="24" aria-label="Google Cloud Skills Boost for Partners" src="https://cdn.qwiklabs.com/PGyhmgS3zZncIEGywnx5UXsKwepRRFQ9BhAg%2FWHNrlQ%3D" /></div>
</div>
<nav class='ql-sidenav'>
<ql-sidenav-item href='/' icon='home' label='Paths'></ql-sidenav-item>

<ql-sidenav-item active href='/catalog' icon='school' label='Explore'></ql-sidenav-item>

<ql-sidenav-item href='/profile' icon='event_note' label='Profile'></ql-sidenav-item>

</nav>

</nav>
<div class='nav-panel__overlay js-nav-toggle'></div>

<main class='js-main' id='jump-content'>
<div class='l-main-wrapper' id='main-wrapper'>




<div class='lab-assessment__tab js-open-lab-assessment-panel'>
<button class='js-lab-assessment-total-score'>
—/100
</button>
</div>
<div aria-labelledby='lab-assessment-checkpoint' class='lab-assessment__panel js-lab-assessment-panel' role='dialog'>
<div class='lab-assessment__panel__header'>
<h4 id='lab-assessment-checkpoint'>Checkpoints</h4>
<ql-icon-button class='js-close-lab-assessment-panel' icon='arrow_forward' label='Close dialog'></ql-icon-button>
</div>
<div class='lab-assessment__step'>
<p class='lab-assessment__step__title' id='lab-assessment-step-title'>
Creating Resources in terraform
</p>
<div class='lab-assessment__step__action'>
<ql-button class='js-show-run-step-button' description='Creating Resources in terraform' step_no='1'>
Check my progress
</ql-button>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-1'>
</span>
/ 30
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title' id='lab-assessment-step-title'>
Change Infrastructure
</p>
<div class='lab-assessment__step__action'>
<ql-button class='js-show-run-step-button' description='Change Infrastructure' step_no='2'>
Check my progress
</ql-button>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-2'>
</span>
/ 20
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title' id='lab-assessment-step-title'>
Destructive Changes
</p>
<div class='lab-assessment__step__action'>
<ql-button class='js-show-run-step-button' description='Destructive Changes' step_no='3'>
Check my progress
</ql-button>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-3'>
</span>
/ 20
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title' id='lab-assessment-step-title'>
Create Resource Dependencies
</p>
<div class='lab-assessment__step__action'>
<ql-button class='js-show-run-step-button' description='Create Resource Dependencies' step_no='4'>
Check my progress
</ql-button>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-4'>
</span>
/ 20
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title' id='lab-assessment-step-title'>
Create bucket dependent instance
</p>
<div class='lab-assessment__step__action'>
<ql-button class='js-show-run-step-button' description='Create bucket dependent instance' step_no='5'>
Check my progress
</ql-button>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-5'>
</span>
/ 10
</p>
</div>
</div>

</div>
<ql-drawer-container class='js-lab-state' data-analytics-payload='{&quot;label&quot;:&quot;Infrastructure as Code with Terraform&quot;,&quot;lab_name&quot;:&quot;Infrastructure as Code with Terraform&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecourses-run&quot;}' data-credits='0.0' data-focus-id='16374' data-lab-billing-limit='0.0' data-lab-duration='3600' data-parent='catalog' data-recaptcha-enabled id='lab-container'>
<ql-drawer id='terminal-drawer' slot='drawer' style='width: calc(100% - 480px)'>
<iframe allow='clipboard-read' class='terminal' id='embedded-resource'></iframe>
</ql-drawer>
<ql-drawer-content class='js-lab-wrapper' id='lab-content' slot='drawer-content'>
<ql-drawer-container id='lab-content-container'>
<ql-drawer id='control-panel-drawer' open slot='drawer' width='320'>
<ql-lab-control-panel class='ql-lab-control-panel__max-height control-panel js-lab-control-panel' connectionFiles='[]' labControlButton='{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}' labDetails='[]' labTimer='{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:3600}' studentResources='[]'>
<script src="https://www.recaptcha.net/recaptcha/api.js?render=6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr"   ></script>
        <script>
          // Define function so that we can call it again later if we need to reset it
          // This executes reCAPTCHA and then calls our callback.
          function executeRecaptchaForStartLab() {
            grecaptcha.ready(function() {
              grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}).then(function(token) {
                setInputWithRecaptchaResponseTokenForStartLab('g-recaptcha-response-data-start-lab', token)
              });
            });
          };
          // Invoke immediately
          executeRecaptchaForStartLab()

          // Async variant so you can await this function from another async function (no need for
          // an explicit callback function then!)
          // Returns a Promise that resolves with the response token.
          async function executeRecaptchaForStartLabAsync() {
            return new Promise((resolve, reject) => {
             grecaptcha.ready(async function() {
                resolve(await grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}))
              });
            })
          };

                    var setInputWithRecaptchaResponseTokenForStartLab = function(id, token) {
            var element = document.getElementById(id);
            element.value = token;
          }

        </script>
<input type="hidden" name="g-recaptcha-response-data[start_lab]" id="g-recaptcha-response-data-start-lab" data-sitekey="6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr" class="g-recaptcha g-recaptcha-response "/>

<div aria-live='polite' class='hidden' id='recaptcha-v2-start-lab' slot='recaptcha'>
<script src="https://www.recaptcha.net/recaptcha/api.js" async defer ></script>
<div data-sitekey="6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV" data-callback="recaptchaComplete" data-expired-callback="expireV2Token" class="g-recaptcha "></div>
          <noscript>
            <div>
              <div style="width: 302px; height: 422px; position: relative;">
                <div style="width: 302px; height: 422px; position: absolute;">
                  <iframe
                    src="https://www.recaptcha.net/recaptcha/api/fallback?k=6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV"
                    name="ReCAPTCHA"
                    style="width: 302px; height: 422px; border-style: none; border: 0; overflow: hidden;">
                  </iframe>
                </div>
              </div>
              <div style="width: 300px; height: 60px; border-style: none;
                bottom: 12px; left: 25px; margin: 0px; padding: 0px; right: 25px;
                background: #f9f9f9; border: 1px solid #c1c1c1; border-radius: 3px;">
                <textarea id="g-recaptcha-response" name="g-recaptcha-response"
                  class="g-recaptcha-response"
                  style="width: 250px; height: 40px; border: 1px solid #c1c1c1;
                  margin: 10px 25px; padding: 0px; resize: none;">
                </textarea>
              </div>
            </div>
          </noscript>

</div>
</ql-lab-control-panel>
</ql-drawer>
<ql-drawer-content id='lab-instructions' slot='drawer-content'>
<ql-snackbar id='alert-snackbar'></ql-snackbar>
<div class='alert alert--fake js-alert'>
<p class='alert__message js-alert-message' role='alert'></p>
<ql-icon-button class='alert__close js-alert-close' icon='clear'></ql-icon-button>
<iframe class='l-ie-iframe-fix' tabindex='-1'></iframe>
</div>
<div class='lab-content__renderable-instructions js-lab-content'>
<div class='lab-preamble'>
<h1 class='lab-preamble__title'>
Infrastructure as Code with Terraform
</h1>
<div class='lab-preamble__details subtitle-headline-1'>
<span>1 hour </span>
<span>Free</span>
<div class='lab__rating'>
<a aria-label="Lab Reviews" href="/focuses/16374/reviews?parent=catalog"><div class='rateit' data-rateit-readonly='true' data-rateit-value='4.5702'></div>

</a></div>
</div>
</div>
<div class='lab-outline-place-holder'></div>

<div class='markdown-lab-instructions js-markdown-instructions' id='markdown-lab-instructions'>

<p><em>This lab was developed with our partner, <a href="https://hashicorp.com/" target="_blank">Hashicorp</a>. Your personal information may be shared with Hashicorp, the lab sponsor, if you have opted-in to receive product updates, announcements, and offers in your Account Profile.</em></p>
<h2 id="step1">GSP750</h2>
<p><img alt="Google Cloud self-paced labs logo" src="https://cdn.qwiklabs.com/GMOHykaqmlTHiqEeQXTySaMXYPHeIvaqa2qHEzw6Occ%3D"></p>
<h2 id="step2">Overview</h2>
<p>Terraform is the infrastructure as code offering from HashiCorp. It is a tool for building, changing, and managing infrastructure in a safe, repeatable way. Operators and Infrastructure teams can use Terraform to manage environments with a configuration language called the HashiCorp Configuration Language (HCL) for human-readable, automated deployments.</p>
<p>Infrastructure as code is the process of managing infrastructure in a file or files rather than manually configuring resources in a user interface. A resource in this instance is any piece of infrastructure in a given environment, such as a virtual machine, security group, network interface, etc. At a high level, Terraform allows operators to use HCL to author files containing definitions of their desired resources on almost any provider (AWS, Google Cloud, GitHub, Docker, etc.) and automates the creation of those resources at the time of apply.</p>
<p>A simple workflow for deployment will follow closely to the steps below:</p>
<ul>
<li>
<p><strong>Scope</strong> - Confirm what resources need to be created for a given project.</p>
</li>
<li>
<p><strong>Author</strong> - Create the configuration file in HCL based on the scoped parameters.</p>
</li>
<li>
<p><strong>Initialize</strong> - Run <code>terraform init</code> in the project directory with the configuration files. This will download the correct provider plug-ins for the project.</p>
</li>
<li>
<p><strong>Plan &amp; Apply</strong> - Run <code>terraform plan</code> to verify creation process and then <code>terraform apply</code> to create real resources as well as the state file that compares future changes in your configuration files to what actually exists in your deployment environment.</p>
</li>
</ul>
<h3>What you'll learn</h3>
<p>In this lab, you will learn how to perform the following tasks:</p>
<ul>
<li>
<p>Build, change, and destroy infrastructure with Terraform</p>
</li>
<li>
<p>Create Resource Dependencies with Terraform</p>
</li>
<li>
<p>Provision infrastructure with Terraform</p>
</li>
</ul>
<h2 id="step3">Setup and requirements</h2>
<h3>Before you click the Start Lab button</h3>
<p>Read these instructions. Labs are timed and you cannot pause them. The timer, which starts when you click <strong>Start Lab</strong>, shows how long Google Cloud resources will be made available to you.</p>
<p>This hands-on lab lets you do the lab activities yourself in a real cloud environment, not in a simulation or demo environment. It does so by giving you new, temporary credentials that you use to sign in and access Google Cloud for the duration of the lab.</p>
<p>To complete this lab, you need:</p>
<ul>
<li>Access to a standard internet browser (Chrome browser recommended).</li>
</ul>
<ql-warningbox>
<strong>Note:</strong> Use an Incognito or private browser window to run this lab. This prevents any conflicts between your personal account and the Student account, which may cause extra charges incurred to your personal account.
</ql-warningbox>
<ul>
<li>Time to complete the lab---remember, once you start, you cannot pause a lab.</li>
</ul>
<ql-warningbox>
<strong>Note:</strong> If you already have your own personal Google Cloud account or project, do not use it for this lab to avoid extra charges to your account.
</ql-warningbox>
<h3>How to start your lab and sign in to the Google Cloud Console</h3>
<ol>
<li>
<p>Click the <strong>Start Lab</strong> button. If you need to pay for the lab, a pop-up opens for you to select your payment method.
On the left is the <strong>Lab Details</strong> panel with the following:</p>
<ul>
<li>The <strong>Open Google Console</strong> button</li>
<li>Time remaining</li>
<li>The temporary credentials that you must use for this lab</li>
<li>Other information, if needed, to step through this lab</li>
</ul>
</li>
<li>
<p>Click <strong>Open Google Console</strong>.
The lab spins up resources, and then opens another tab that shows the <strong>Sign in</strong> page.</p>
<p><strong><em>Tip:</em></strong> Arrange the tabs in separate windows, side-by-side.</p>
<ql-infobox>
<strong>Note: </strong>If you see the <strong>Choose an account</strong> dialog, click <strong>Use Another Account</strong>.        
 </ql-infobox>
</li>
<li>
<p>If necessary, copy the <strong>Username</strong> from the <strong>Lab Details</strong> panel and paste it into the <strong>Sign in</strong> dialog. Click <strong>Next</strong>.</p>
</li>
<li>
<p>Copy the <strong>Password</strong> from the <strong>Lab Details</strong> panel and paste it into the <strong>Welcome</strong> dialog. Click <strong>Next</strong>.</p>
<ql-infobox>
<strong>Important: </strong>You must use the credentials from the left panel. Do not use your Google Cloud Skills Boost credentials. 
 </ql-infobox>
<ql-warningbox>
<strong>Note: </strong>Using your own Google Cloud account for this lab may incur extra charges.
 </ql-warningbox>
</li>
<li>
<p>Click through the subsequent pages:</p>
<ul>
<li>Accept the terms and conditions.</li>
<li>Do not add recovery options or two-factor authentication (because this is a temporary account).</li>
<li>Do not sign up for free trials.</li>
</ul>
</li>
</ol>
<p>After a few moments, the Cloud Console opens in this tab.</p>
<ql-infobox>
<strong>Note:</strong> You can view the menu with a list of Google Cloud Products and Services by clicking the <strong>Navigation menu</strong> at the top-left.
<img alt="Navigation menu icon" src="https://cdn.qwiklabs.com/nUxFb6oRFr435O3t6V7WYJAjeDFcrFb16G9wHWp5BzU%3D">
</ql-infobox>
<h3>Activate Cloud Shell</h3>
<p>Cloud Shell is a virtual machine that is loaded with development tools. It offers a persistent 5GB home directory and runs on the Google Cloud. Cloud Shell provides command-line access to your Google Cloud resources.</p>
<ol>
<li>Click <strong>Activate Cloud Shell</strong> <img alt="Activate Cloud Shell icon" src="https://cdn.qwiklabs.com/ep8HmqYGdD%2FkUncAAYpV47OYoHwC8%2Bg0WK%2F8sidHquE%3D"> at the top of the Google Cloud console.</li>
</ol>
<p>When you are connected, you are already authenticated, and the project is set to your <strong>PROJECT_ID</strong>. The output contains a line that declares the <strong>PROJECT_ID</strong> for this session:</p>
<ql-code-block output="">
Your Cloud Platform project in this session is set to YOUR_PROJECT_ID
</ql-code-block>
<p><code>gcloud</code> is the command-line tool for Google Cloud. It comes pre-installed on Cloud Shell and supports tab-completion.</p>
<ol start="2">
<li>
<p>(Optional) You can list the active account name with this command:</p>
</li>
</ol>
<ql-code-block language="plaintext">
gcloud auth list
</ql-code-block>
<ol start="3">
<li>
<p>Click <strong>Authorize</strong>.</p>
</li>
<li>
<p>Your output should now look like this:</p>
</li>
</ol>
<p><strong>Output:</strong></p>
<ql-code-block language="plaintext" output="">
ACTIVE: *
ACCOUNT: student-01-xxxxxxxxxxxx@qwiklabs.net
To set the active account, run:
    $ gcloud config set account `ACCOUNT`
</ql-code-block>
<ol start="5">
<li>
<p>(Optional) You can list the project ID with this command:</p>
</li>
</ol>
<ql-code-block language="plaintext">
gcloud config list project
</ql-code-block>
<p><strong>Output:</strong></p>
<ql-code-block language="plaintext" output="">
[core]
project = &lt;project_ID&gt;
</ql-code-block>
<p><strong>Example output:</strong></p>
<ql-code-block language="plaintext" output="">
[core]
project = qwiklabs-gcp-44776a13dea667a6
</ql-code-block>
<ql-infobox>
<strong>Note: </strong>For full documentation of <code>gcloud</code>, in Google Cloud, refer to <a href="https://cloud.google.com/sdk/gcloud" target="_blank">the gcloud CLI overview guide</a>.
</ql-infobox>
<h2 id="step4">Task 1. Build infrastructure</h2>
<p>Terraform comes pre-installed in Cloud Shell. With Terraform already installed, you can dive right in and create some infrastructure.</p>
<p>Start by creating your example configuration to a file named <code>main.tf</code>. Terraform recognizes files ending in <code>.tf</code> or <code>.tf.json</code> as configuration files and will load them when it runs.</p>
<ol>
<li>
<p>Create the <code>main.tf</code> file:</p>
</li>
</ol>
<ql-code-block language="plaintext">
touch main.tf
</ql-code-block>
<ol start="2">
<li>
<p>Click the <strong>Open Editor</strong> button on the toolbar of Cloud Shell. (You can switch between Cloud Shell and the code editor by using the <strong>Open Editor</strong> and <strong>Open Terminal</strong> icons as required, or click the <strong>Open in new window</strong> button to leave the Editor open in a separate tab).</p>
</li>
<li>
<p>In the Editor, add the following content to the <code>main.tf</code> file. Make sure to replace <code>&lt;PROJECT_ID&gt;</code> with the lab's Project ID:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform {
  required_providers {
    google = {
      source = "hashicorp/google"
    }
  }
}
provider "google" {
  version = "3.5.0"
  project = "&lt;PROJECT_ID&gt;"
  region  = "us-central1"
  zone    = "us-central1-c"
}
resource "google_compute_network" "vpc_network" {
  name = "terraform-network"
}
</ql-code-block>
<ql-infobox><strong>Note: </strong>To use this snippet with Terraform 0.12, remove the <code>terraform {}</code> block.</ql-infobox>
<h3>Terraform block</h3>
<p>The <code>terraform {}</code> block is required so Terraform knows which provider to download from the <a href="https://registry.terraform.io/" target="_blank">Terraform Registry</a>. In the configuration above, the <code>google</code> provider's source is defined as <code>hashicorp/google</code> which is shorthand for <code>registry.terraform.io/hashicorp/google</code>.</p>
<p>You can also assign a version to each provider defined in the <code>required_providers</code> block. The <code>version</code> argument is optional, but recommended. It is used to constrain the provider to a specific version or a range of versions in order to prevent downloading a new provider that may possibly contain breaking changes. If the version isn't specified, Terraform will automatically download the most recent provider during initialization.</p>
<p>To learn more, on the HashiCorp Terraform website, see <a href="https://www.terraform.io/docs/configuration/provider-requirements.html" target="_blank">Provider Requirements</a>.</p>
<h3>Providers</h3>
<p>The <code>provider</code> block is used to configure the named provider, in this case <code>google</code>. A provider is responsible for creating and managing resources. Multiple provider blocks can exist if a Terraform configuration manages resources from different providers.</p>
<h3>Initialization</h3>
<p>The first command to run for a new configuration -- or after checking out an existing configuration from version control -- is <code>terraform init</code>, which initializes various local settings and data that will be used by subsequent commands.</p>
<ul>
<li>
<p>Initialize your new Terraform configuration by running the <code>terraform init</code> command in the same directory as your <code>main.tf</code> file:</p>
</li>
</ul>
<ql-code-block language="plaintext">
terraform init
</ql-code-block>
<h3>Creating resources</h3>
<ol>
<li>
<p>Apply you configuration now by running the command <code>terraform apply</code>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<p>The output has a <code>+</code> next to resource <code>"google_compute_network" "vpc_network"</code>, meaning that Terraform will create this resource. Beneath that, it shows the attributes that will be set. When the value displayed is <code>(known after apply)</code>, it means that the value won't be known until the resource is created.</p>
<p>If the plan was created successfully, Terraform will now pause and wait for approval before proceeding. If anything in the plan seems incorrect or dangerous, it is safe to abort here with no changes made to your infrastructure.</p>
<p>If <code>terraform apply</code> failed with an error, read the error message and fix the error that occurred.</p>
<ol start="2">
<li>The plan looks acceptable here, so type <code>yes</code> at the confirmation prompt to proceed.</li>
</ol>
<p>Executing the plan will take a few minutes since Terraform waits for the network to be created successfully:</p>
<ql-code-block output="">
# ...
  Enter a value: yes
google_compute_network.vpc_network: Creating...
google_compute_network.vpc_network: Still creating... [10s elapsed]
google_compute_network.vpc_network: Still creating... [20s elapsed]
google_compute_network.vpc_network: Still creating... [30s elapsed]
google_compute_network.vpc_network: Still creating... [40s elapsed]
google_compute_network.vpc_network: Still creating... [50s elapsed]
google_compute_network.vpc_network: Creation complete after 58s [id=terraform-network]
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
</ql-code-block>
<p>After this, Terraform is all done! You can go to the Cloud Console to see the network you have provisioned.</p>
<ol start="3">
<li>In the Console, from the <strong>Navigation menu</strong>, navigate to <strong>VPC network</strong>. You will see the <code>terraform-network</code> has been provisioned.</li>
</ol>
<p><img alt="VPC networks page" src="https://cdn.qwiklabs.com/ixPpe0919FV8gS8Aekxv2tD8zu7LpVC%2B4yGFQyl%2FJzQ%3D"></p>
<ol start="4">
<li>
<p>In Cloud Shell run the <code>terraform show</code> command to inspect the current state:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform show
</ql-code-block>
<p>These values can be referenced to configure other resources or outputs, which will be covered later in this lab.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="1">
Creating Resources in terraform
</ql-activity-tracking></p>
<h2 id="step5">Task 2. Change infrastructure</h2>
<p>In the previous section, you created basic infrastructure with Terraform: a VPC network. In this section, you're going to modify your configuration, and see how Terraform handles change.</p>
<p>Infrastructure is continuously evolving, and Terraform was built to help manage and enact that change. As you change Terraform configurations, Terraform builds an execution plan that only modifies what is necessary to reach your desired state.</p>
<p>By using Terraform to change infrastructure, you can version control not only your configurations but also your state so you can see how the infrastructure evolves over time.</p>
<h3>Adding resources</h3>
<p>You can add new resources by adding them to your Terraform configuration and running <code>terraform apply</code> to provision them.</p>
<ol>
<li>
<p>In the Editor, add a compute instance resource to <code>main.tf</code>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
resource "google_compute_instance" "vm_instance" {
  name         = "terraform-instance"
  machine_type = "f1-micro"
  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }
  network_interface {
    network = google_compute_network.vpc_network.name
    access_config {
    }
  }
}
</ql-code-block>
<p>This resource includes a few more arguments. The name and machine type are simple strings, but <code>boot_disk</code> and <code>network_interface</code> are more complex blocks. You can see all of the available options in the <a href="https://www.terraform.io/docs/providers/google/r/compute_instance" target="_blank">google_compute_instance documentation</a>.</p>
<p>For this example, your compute instance will use a Debian operating system, and will be connected to the VPC Network you created earlier. Notice how this configuration refers to the network's name property with <code>google_compute_network.vpc_network.name</code> -- <code>google_compute_network.vpc_network</code> is the ID, matching the values in the block that defines the network, and <code>name</code> is a property of that resource.</p>
<p>The presence of the <code>access_config</code> block, even without any arguments, ensures that the instance will be accessible over the internet.</p>
<ol start="2">
<li>
<p>Now run <code>terraform apply</code> to create the compute instance:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<ol start="3">
<li>Once again, answer <code>yes</code> to the confirmation prompt.</li>
</ol>
<p>This is a fairly straightforward change - you added a "google_compute_instance" resource named "vm_instance" to your configuration, and Terraform created the resource in Google Cloud.</p>
<h3>Changing resources</h3>
<p>In addition to creating resources, Terraform can also make changes to those resources.</p>
<ol>
<li>
<p>Add a <code>tags</code> argument to your "vm_instance" so that it looks like this:</p>
</li>
</ol>
<ql-code-block language="plaintext">
resource "google_compute_instance" "vm_instance" {
  name         = "terraform-instance"
  machine_type = "f1-micro"
  tags         = ["web", "dev"]
  # ...
}
</ql-code-block>
<ol start="2">
<li>
<p>Run <code>terraform apply</code> again to update the instance:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<ol start="3">
<li>The prefix <code>~</code> means that Terraform will update the resource in-place. You can go and apply this change now by responding <code>yes</code>, and Terraform will add the tags to your instance.</li>
</ol>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="2">
Change Infrastructure
</ql-activity-tracking></p>
<h3>Destructive changes</h3>
<p>A destructive change is a change that requires the provider to replace the existing resource rather than updating it. This usually happens because the cloud provider doesn't support updating the resource in the way described by your configuration.</p>
<p>Changing the disk image of your instance is one example of a destructive change.</p>
<ol>
<li>
<p>Edit the <code>boot_disk</code> block inside the <code>vm_instance</code> resource in your configuration file and change it to the following:</p>
</li>
</ol>
<ql-code-block language="plaintext">
  boot_disk {
    initialize_params {
      image = "cos-cloud/cos-stable"
    }
  }
</ql-code-block>
<ol start="2">
<li>
<p>Now run <code>terraform apply</code> again to see how Terraform will apply this change to the existing resources:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<p>The prefix <code>-/+</code> means that Terraform will destroy and recreate the resource, rather than updating it in-place. While some attributes can be updated in-place (which are shown with the <code>~</code> prefix), changing the boot disk image for an instance requires recreating it. Terraform and the Google Cloud provider handle these details for you, and the execution plan makes it clear what Terraform will do.</p>
<p>Additionally, the execution plan shows that the disk image change is what required your instance to be replaced. Using this information, you can adjust your changes to possibly avoid destroy/create updates if they are not acceptable in some situations.</p>
<ol start="3">
<li>Once again, Terraform prompts for approval of the execution plan before proceeding. Answer <code>yes</code> to execute the planned steps.</li>
</ol>
<p>As indicated by the execution plan, Terraform first destroyed the existing instance and then created a new one in its place. You can use <code>terraform show</code> again to see the new values associated with this instance.</p>
<h3>Destroy infrastructure</h3>
<p>You have now seen how to build and change infrastructure. Before moving on to creating multiple resources and showing resource dependencies, you will see how to completely destroy your Terraform-managed infrastructure.</p>
<p>Destroying your infrastructure is a rare event in production environments. But if you're using Terraform to spin up multiple environments such as development, testing, and staging, then destroying is often a useful action.</p>
<p>Resources can be destroyed using the <code>terraform destroy</code> command, which is similar to <code>terraform apply</code> but it behaves as if all of the resources have been removed from the configuration.</p>
<ul>
<li>
<p>Try the <code>terraform destroy</code> command. Answer <code>yes</code> to execute this plan and destroy the infrastructure:</p>
</li>
</ul>
<ql-code-block language="plaintext">
terraform destroy
</ql-code-block>
<p>The <code>-</code> prefix indicates that the instance and the network will be destroyed. As with apply, Terraform shows its execution plan and waits for approval before making any changes.</p>
<p>Just like with <code>terraform apply</code>, Terraform determines the order in which things must be destroyed. Google Cloud won't allow a VPC network to be deleted if there are resources still in it, so Terraform waits until the instance is destroyed before destroying the network. When performing operations, Terraform creates a dependency graph to determine the correct order of operations. In more complicated cases with multiple resources, Terraform will perform operations in parallel when it's safe to do so.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="3">
Destructive Changes
</ql-activity-tracking></p>
<h2 id="step6">Task 3. Create resource dependencies</h2>
<p>In this section, you will learn more about resource dependencies and how to use resource parameters to share information about one resource with other resources.</p>
<p>Real-world infrastructure has a diverse set of resources and resource types. Terraform configurations can contain multiple resources, multiple resource types, and these types can even span multiple providers.</p>
<p>In this section, you will be shown a basic example of how to configure multiple resources and how to use resource attributes to configure other resources.</p>
<ul>
<li>
<p>Recreate your network and instance. After you respond to the prompt with <code>yes</code>, the resources will be created:</p>
</li>
</ul>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<h3>Assigning a static IP address</h3>
<ol>
<li>
<p>Now add to your configuration by assigning a static IP to the VM instance in <code>main.tf</code>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
resource "google_compute_address" "vm_static_ip" {
  name = "terraform-static-ip"
}
</ql-code-block>
<p>This should look familiar from the earlier example of adding a VM instance resource, except this time you're creating a "google_compute_address" resource type. This resource type allocates a reserved IP address to your project.</p>
<ol start="2">
<li>
<p>Next, run <code>terraform plan</code>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform plan
</ql-code-block>
<p>You can see what will be created with <code>terraform plan</code>:</p>
<ql-code-block output="">
$ terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
google_compute_network.vpc_network: Refreshing state... [id=terraform-network]
google_compute_instance.vm_instance: Refreshing state... [id=terraform-instance]
------------------------------------------------------------------------
An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create
Terraform will perform the following actions:
  # google_compute_address.vm_static_ip will be created
  + resource "google_compute_address" "vm_static_ip" {
      + address            = (known after apply)
      + address_type       = "EXTERNAL"
      + creation_timestamp = (known after apply)
      + id                 = (known after apply)
      + name               = "terraform-static-ip"
      + network_tier       = (known after apply)
      + project            = (known after apply)
      + region             = (known after apply)
      + self_link          = (known after apply)
      + subnetwork         = (known after apply)
      + users              = (known after apply)
    }
Plan: 1 to add, 0 to change, 0 to destroy.
------------------------------------------------------------------------
Note: You didn't specify an "-out" parameter to save this plan, so Terraform can't guarantee that exactly these actions will be performed if
"terraform apply" is subsequently run.
</ql-code-block>
<p>Unlike <code>terraform apply</code>, the <code>plan</code> command will only show what would be changed, and never actually apply the changes directly. Notice that the only change you have made so far is to add a static IP. Next, you need to attach the IP address to your instance.</p>
<ol start="3">
<li>
<p>Update the <code>network_interface</code> configuration for your instance like so:</p>
</li>
</ol>
<ql-code-block language="plaintext">
  network_interface {
    network = google_compute_network.vpc_network.self_link
    access_config {
      nat_ip = google_compute_address.vm_static_ip.address
    }
  }
</ql-code-block>
<p>The <code>access_config</code> block has several optional arguments, and in this case you'll set <code>nat_ip</code> to be the static IP address. When Terraform reads this configuration, it will:</p>
<ul>
<li>
<p>Ensure that <code>vm_static_ip</code> is created before <code>vm_instance</code></p>
</li>
<li>
<p>Save the properties of <code>vm_static_ip</code> in the state</p>
</li>
<li>
<p>Set <code>nat_ip</code> to the value of the <code>vm_static_ip.address</code> property</p>
</li>
</ul>
<ol start="4">
<li>
<p>Run terraform plan again, but this time, save the plan:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform plan -out static_ip
</ql-code-block>
<p>Saving the plan this way ensures that you can apply exactly the same plan in the future. If you try to apply the file created by the plan, Terraform will first check to make sure the exact same set of changes will be made before applying the plan.</p>
<p>In this case, you can see that Terraform will create a new <code>google_compute_address</code> and update the existing VM to use it.</p>
<ol start="5">
<li>
<p>Run <code>terraform apply "static_ip"</code> to see how Terraform plans to apply this change:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply "static_ip"
</ql-code-block>
<p>As shown above, Terraform created the static IP before modifying the VM instance. Due to the interpolation expression that passes the IP address to the instance's network interface configuration, Terraform is able to infer a dependency, and knows it must create the static IP before updating the instance.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="4">
Create Resource Dependencies
</ql-activity-tracking></p>
<h3>Implicit and explicit dependencies</h3>
<p>By studying the resource attributes used in interpolation expressions, Terraform can automatically infer when one resource depends on another. In the example above, the reference to <code>google_compute_address.vm_static_ip.address</code> creates an <em>implicit dependency</em> on the <code>google_compute_address</code> named <code>vm_static_ip</code>.</p>
<p>Terraform uses this dependency information to determine the correct order in which to create and update different resources. In the example above, Terraform knows that the <code>vm_static_ip</code> must be created before the <code>vm_instance</code> is updated to use it.</p>
<p>Implicit dependencies via interpolation expressions are the primary way to inform Terraform about these relationships, and should be used whenever possible.</p>
<p>Sometimes there are dependencies between resources that are <em>not</em> visible to Terraform. The <code>depends_on</code> argument can be added to any resource and accepts a list of resources to create explicit dependencies for.</p>
<p>For example, perhaps an application you will run on your instance expects to use a specific Cloud Storage bucket, but that dependency is configured inside the application code and thus not visible to Terraform. In that case, you can use <code>depends_on</code> to explicitly declare the dependency.</p>
<ol>
<li>
<p>Add a Cloud Storage bucket and an instance with an explicit dependency on the bucket by adding the following to <code>main.tf</code>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
# New resource for the storage bucket our application will use.
resource "google_storage_bucket" "example_bucket" {
  name     = "&lt;UNIQUE-BUCKET-NAME&gt;"
  location = "US"
  website {
    main_page_suffix = "index.html"
    not_found_page   = "404.html"
  }
}
# Create a new instance that uses the bucket
resource "google_compute_instance" "another_instance" {
  # Tells Terraform that this VM instance must be created only after the
  # storage bucket has been created.
  depends_on = [google_storage_bucket.example_bucket]
  name         = "terraform-instance-2"
  machine_type = "f1-micro"
  boot_disk {
    initialize_params {
      image = "cos-cloud/cos-stable"
    }
  }
  network_interface {
    network = google_compute_network.vpc_network.self_link
    access_config {
    }
  }
}
</ql-code-block>
<ql-infobox><strong>Note: </strong>
Storage buckets must be globally unique. Because of this, you will need to replace <code>UNIQUE-BUCKET-NAME</code> with a unique, valid name for a bucket. Using your name and the date is usually a good way to guess a unique bucket name.
</ql-infobox>
<p>You may wonder where in your configuration these resources should go. The order that resources are defined in a terraform configuration file has no effect on how Terraform applies your changes. Organize your configuration files in a way that makes the most sense for you and your team.</p>
<ol start="2">
<li>
<p>Now run terraform plan and terraform apply to see these changes in action:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform plan
terraform apply
</ql-code-block>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="5">
Create bucket dependent instance
</ql-activity-tracking></p>
<ol start="3">
<li>
<p>Before moving on, remove these new resources from your configuration and run <code>terraform apply</code> once again to destroy them. You won't use the bucket or the second instance any further in the getting started guide.</p>
</li>
</ol>
<h2 id="step7">Task 4. Provision infrastructure</h2>
<p>The compute instance you launched at this point is based on the Google image given, but has no additional software installed or configuration applied.</p>
<p>Google Cloud allows customers to manage their own <a href="https://cloud.google.com/compute/docs/images/create-delete-deprecate-private-images" target="_blank">custom operating system images</a>. This can be a great way to ensure the instances you provision with Terraform are pre-configured based on your needs. <a href="https://www.packer.io/" target="_blank">Packer</a> is the perfect tool for this and includes a <a href="https://www.packer.io/docs/builders/googlecompute.html" target="_blank">builder for Google Cloud</a>.</p>
<p>Terraform uses provisioners to upload files, run shell scripts, or install and trigger other software like configuration management tools.</p>
<h3>Defining a provisioner</h3>
<ol>
<li>
<p>To define a provisioner, modify the resource block defining the first <code>vm_instance</code> in your configuration to look like the following:</p>
</li>
</ol>
<ql-code-block language="plaintext">
resource "google_compute_instance" "vm_instance" {
  name         = "terraform-instance"
  machine_type = "f1-micro"
  tags         = ["web", "dev"]
  provisioner "local-exec" {
    command = "echo ${google_compute_instance.vm_instance.name}:  ${google_compute_instance.vm_instance.network_interface[0].access_config[0].nat_ip} &gt;&gt; ip_address.txt"
  }
  # ...
}
</ql-code-block>
<p>This adds a <code>provisioner</code> block within the <code>resource</code> block. Multiple <code>provisioner</code> blocks can be added to define multiple provisioning steps. Terraform supports <a href="https://www.terraform.io/docs/provisioners/index.html" target="_blank">many provisioners</a>, but for this example you are using the <code>local-exec</code> provisioner.</p>
<p>The <code>local-exec</code> provisioner executes a command locally on the machine running Terraform, not the VM instance itself. You're using this provisioner versus the others so we don't have to worry about specifying any <a href="https://www.terraform.io/docs/provisioners/connection.html" target="_blank">connection info</a> right now.</p>
<p>This also shows a more complex example of string interpolation than you've seen before. Each VM instance can have multiple network interfaces, so refer to the first one with <code>network_interface[0]</code>, count starting from 0, as most programming languages do. Each network interface can have multiple access_config blocks as well, so once again you specify the first one.</p>
<ol start="2">
<li>
<p>Run <code>terraform apply</code>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<p>At this point, the output may be confusing at first.</p>
<p>Terraform found nothing to do - and if you check, you'll find that there's no <code>ip_address.txt</code> file on your local machine.</p>
<p>Terraform treats provisioners differently from other arguments. Provisioners only run when a resource is created, but adding a provisioner does not force that resource to be destroyed and recreated.</p>
<ol start="3">
<li>
<p>Use <code>terraform taint</code> to tell Terraform to recreate the instance:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform taint google_compute_instance.vm_instance
</ql-code-block>
<p>A tainted resource will be destroyed and recreated during the next <code>apply</code>.</p>
<ol start="4">
<li>
<p>Run <code>terraform apply</code> now:</p>
</li>
</ol>
<ql-code-block language="plaintext">
terraform apply
</ql-code-block>
<ol start="5">
<li>Verify everything worked by looking at the contents of the <code>ip_address.txt</code> file.</li>
</ol>
<p>It contains the IP address, just as you asked.</p>
<h3>Failed provisioners and tainted resources</h3>
<p>If a resource is successfully created but fails a provisioning step, Terraform will error and mark the resource as <em>tainted</em>. A resource that is tainted still exists, but shouldn't be considered safe to use, since provisioning failed.</p>
<p>When you generate your next execution plan, Terraform will remove any tainted resources and create new resources, attempting to provision them again after creation.</p>
<h3>Destroy provisioners</h3>
<p>Provisioners can also be defined that run only during a destroy operation. These are useful for performing system cleanup, extracting data, etc.</p>
<p>For many resources, using built-in cleanup mechanisms is recommended if possible (such as init scripts), but provisioners can be used if necessary.</p>
<p>This lab won't show any destroyed provisioner examples. If you need to use destroy provisioners, please see the <a href="https://www.terraform.io/docs/provisioners/" target="_blank">Provisioners documentation</a>.</p>
<h2 id="step8">Congratulations!</h2>
<p>In this lab, you learned how to build, change, and destroy infrastructure with Terraform. You then created resource dependencies, and provisioned basic infrastructure with Terraform configuration files.</p>

<h3>Finish your quest</h3>
<p>This self-paced lab is part of the <a href="https://google.qwiklabs.com/quests/159" target="_blank">Automating Infrastructure on Google Cloud with Terraform</a> quest. A quest is a series of related labs that form a learning path. Completing this quest earns you a badge to recognize your achievement. You can make your badge or badges public and link to them in your online resume or social media account. <a href="https://www.cloudskillsboost.google/quests/159/enroll" target="_blank">Enroll in this quest</a> or any quest that contains this lab and get immediate completion credit.  See the <a href="http://cloudskillsboost.google/catalog" target="_blank">Google Cloud Skills Boost catalog</a> to see all available quests.</p>
<h3>Take your next lab</h3>
<p>Continue your quest with the next lab, <a href="https://www.cloudskillsboost.google/catalog_lab/3358" target="_blank">Interact with Terraform Modules</a>.</p>
<h3>Next steps/Learn more</h3>
<p>Be sure to check out the following resources to receive more hands-on practice with Terraform:</p>
<ul>
<li>
<a href="https://console.cloud.google.com/marketplace/browse?q=Hashicorp&amp;utm_source=Hashicorp&amp;utm_medium=qwiklabs&amp;utm_campaign=Qwiklabs+to+Marketplace" target="_blank">Hashicorp</a> on the Google Cloud Marketplace!</li>
<li><a href="https://learn.hashicorp.com/terraform" target="_blank">Hashicorp Learn</a></li>
<li><a href="https://www.terraform.io/community.html" target="_blank">Terraform Community</a></li>
<li><a href="https://github.com/GoogleCloudPlatform/terraform-google-examples" target="_blank">Terraform Google Examples</a></li>
</ul>
<h3>Google Cloud training and certification</h3>
<p>...helps you make the most of Google Cloud technologies. <a href="https://cloud.google.com/training/courses" target="_blank">Our classes</a> include technical skills and best practices to help you get up to speed quickly and continue your learning journey. We offer fundamental to advanced level training, with on-demand, live, and virtual options to suit your busy schedule. <a href="https://cloud.google.com/certification/" target="_blank">Certifications</a> help you validate and prove your skill and expertise in Google Cloud technologies.</p>
<h4>Manual Last Updated October 27, 2022</h4>
<h4>Lab Last Tested October 27, 2022</h4>
<p>Copyright 2023 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>

</div>
</div>


<div class='lab-content__end-lab-button js-end-lab-button-container hidden'>
<ql-lab-control-button class='js-end-lab-button' running></ql-lab-control-button>
</div>
<!-- / TODO: Move recommendations into the end lab modal -->
<div class='lab-content__renderable-instructions'>
<div class='lab-content__recommendation'>
<!-- # TODO: Change classes so that this doesn't stack vertically -->
<section class='upcoming-cards'>
<h2 class='ql-headline-4'>Continue questing</h2>
<div class='activity-cards'>
<ql-activity-card aria-label='Infrastructure as Code with Terraform' name='Infrastructure as Code with Terraform' path='/focuses/16374?parent=catalog' progress='0.0' type='lab'></ql-activity-card>

</div>
</section>

</div>

</div>
</ql-drawer-content>
<ql-drawer end id='outline-drawer' open slot='drawer' width='320'>
<div aria-label='Lab Table of Contents' role='navigation'>
<ul class='lab-content__outline js-lab-content-outline'>
<li><a href="#step1">GSP750</a></li><li><a href="#step2">Overview</a></li><li><a href="#step3">Setup and requirements</a></li><li><a href="#step4">Task 1. Build infrastructure</a></li><li><a href="#step5">Task 2. Change infrastructure</a></li><li><a href="#step6">Task 3. Create resource dependencies</a></li><li><a href="#step7">Task 4. Provision infrastructure</a></li><li><a href="#step8">Congratulations!</a></li>
</ul>
</div>
</ql-drawer>
</ql-drawer-container>
</ql-drawer-content>
</ql-drawer-container>



</div>
</main>

<span class='hidden' id='flash-sibling-before'></span>
<ql-snackbar></ql-snackbar>


<div class='modal fade' id='lab-details-modal'>
<div class='modal-container'>
<div class='modal-content mdl-shadow--24dp'>
<div class='modal-body'>
<p class='l-mbm'>
In this hands-on lab you will build, change, provision, and destroy infrastructure using Terraform in the cloud environment.
</p>
<p>
This lab is included in these quests:
<a href="/quests/159">Automating Infrastructure on Google Cloud with Terraform</a>, <a href="/quests/212">Creating Infrastructure on Google Cloud with Terraform</a>, <a href="/quests/228">Qwiklabs Trivia September 2022</a>.
If you complete this lab you&#39;ll receive credit for it when you enroll in one of these quests.
</p>
<p class='small-label l-mbs'>
<strong>
Duration:
</strong>
0m setup
&middot;
60m access
&middot;
60m completion
</p>
<p class='small-label l-mbs'>
<strong>AWS Region:</strong>
[] <strong></strong>
</p>
<p class='small-label l-mbs'>
<span><strong>Levels: </strong>introductory</span>
</p>
<p class='small-label'>
<strong>
Permalink:
</strong>
<a href="https://partner.cloudskillsboost.google/catalog_lab/3362">https://partner.cloudskillsboost.google/catalog_lab/3362</a>
</p>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Got It
</a>
</div>


</div>
</div>
<iframe class='l-ie-iframe-fix' tabindex='-1' title='modal'></iframe>
</div>
<ql-dialog headline='How satisfied are you with this lab?&lt;span aria-hidden=&quot;true&quot;&gt;*&lt;/span&gt;' id='lab-review-dialog'>
<form class="simple_form js-lab-review-form" id="new_lab_review" action="/lab_reviews" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" autocomplete="off" /><div aria-labelledby='lab-review-dialog' aria-required='true' aria-valuemax='5' aria-valuemin='0' aria-valuenow='0' class='rateit js-rateit' data-rateit-max='5' data-rateit-min='0' data-rateit-resetable='false' data-rateit-step='1' data-rateit-value='0' id='lab-review-rateit' role='slider' tabindex='0'></div>
<div class='l-mtm'>

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" value="11061062" name="lab_review[user_id]" id="lab_review_user_id" /></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" name="lab_review[classroom_id]" id="lab_review_classroom_id" /></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" value="3362" name="lab_review[lab_id]" id="lab_review_lab_id" /></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" name="lab_review[focus_id]" id="lab_review_focus_id" /></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" autocomplete="off" type="hidden" name="lab_review[rating]" id="lab_review_rating" /></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Additional Comments</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment">
</textarea></div></div>
</div>
</form><ql-button disabled id='submit' label='Submit' slot='action' text></ql-button>
</ql-dialog>

<ql-dialog headline='All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?' icon='error_outline' id='js-lab-are-you-sure-dialog'>
<ql-button id='js-are-you-sure-button' label='Submit' slot='action' text></ql-button>
</ql-dialog>


<script>
  $(function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    ql.favoriting.init();
  ql.chat.init();
  ql.jumpContent.init();
  ql.labControlPanel.addRecaptchaErrorHandler();
  initLabContent();
  ql.labOutline.links.init();
  initLabReviewModal();
  initLabReviewTranslations( {"star_amount_1":"1 of 5 stars","star_amount_2":"2 of 5 stars","star_amount_3":"3 of 5 stars","star_amount_4":"4 of 5 stars","star_amount_5":"5 of 5 stars"} )
  ql.labAssessment.init();
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>

</body>
</html>

